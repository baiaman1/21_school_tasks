# DDD & MVP

## Contents

[[_TOC_]]

## Chapter I 

### Что такое DDD?
Domain Driven Design или предметно-ориентированное проектирование -  это концепция, согласно которой структура и язык программного кода (имена классов, методы классов, переменные классов) должны соответствовать бизнес-области. Данный термин был впервые введен Э. Эвансом в его книге с таким же названием «Domain-Driven Design»

**Единый язык**
Основная идея использования единого языка заключается в том, чтобы привести приложение в соответствие с бизнесом. Это достигается путем принятия общего языка между бизнесом и технологией в коде. 
Код, классы, методы, свойства и наименование модулей должны соответствовать единому языку. При необходимости стоит провести рефакторинг кода!

**Ограниченный контекст**
Эта концептуальная граница называется ограниченный контекст (Bounded context). Это второе по значимости свойство DDD после единого языка. Оба эти понятия взаимосвязаны и не могут существовать друг без друга.
В каждом ограниченном контексте существует только один единый язык.

![](./misc/images/Domain-driven-design-recept-dlya-pragmatika-21.jpeg)

**Предметная область (Domain)** – это то, что делает организация, и среда, в которой она это делает.  Очень важно разделять модели на логические разделенные предметные **подобласти (Subdomain)** всей предметной области, согласно их фактической функциональности. Подобласти позволяют быстрее определить разные части предметной области, необходимые для решения конкретной задачи.
**Смысловое ядро (Core Domain)** – это подобласть, имеющая первостепенное значение для организации. Со стратегической точки зрения бизнес должен выделяться своим смысловым ядром.

### Слои, определенные DDD:

**Пользовательский интерфейс**
Отвечает за рисование экранов, с помощью которых пользователи взаимодействуют с приложением, и преобразование пользовательского ввода в команды приложения.

**Прикладной уровень**
Оркестрирует объекты домена для выполнения задач, требуемых пользователями: Use Cases. Он не содержит бизнес-логики. 

**Слой домена**
Это слой, который содержит всю бизнес-логику, доменные службы, сущности, события и любые другие типы объектов, содержащие бизнес-логику. 

**Инфраструктурный слой**
Слой инфраструктуры предоставляет технические возможности, которые поддерживают вышеуказанные слои, т.е. хранение данных, обмен сообщениями и т.п.

![](./misc/images/ddd.jpg)

### Строительные блоки DDD

![](./misc/images/PatternsDDD.png)

**Сущность (Entity)**
Объект, который не определяется своими атрибутами, а скорее нитью преемственности и своей идентичностью.


**Объект-Значение (Value Object)**
Объект-значение - это объект, который содержит атрибуты, но не имеет концептуальной идентичности. Такие объекты рассматриваться как неизменяемые.

**Агрегат (Aggregate)**
Группа объектов, связанных вместе корневой сущностью: корнем агрегата. Объектам вне агрегата разрешается иметь ссылки на корень, но не на любой другой объект агрегата. Корень агрегата отвечает за проверку согласованности изменений в агрегате.

**Событие домена (Domain Event)**
Объект домена, определяющий событие (то, что происходит). Событие домена - это событие, о котором заботятся эксперты домена.

**Сервис (Service)**
Когда операция концептуально не принадлежит ни одному объекту. Следуя естественным контурам проблемы, вы можете реализовать эти операции в сервисах. 

**Репозиторий (Repository)**
Методы извлечения объектов домена должны делегироваться специализированному объекту Repository, чтобы можно было легко заменять альтернативные реализации хранилища.

**Фабрика (Factory)**
Методы создания доменных объектов должны быть делегированы специализированному объекту Factory, чтобы можно было легко менять альтернативные реализации.

### MVP
Minimal Viable Product (минимально жизнеспособный продукт) — тестовая версия товара, услуги или сервиса с минимальным набором функций (иногда даже одной), которая несет ценность для конечного потребителя.

MVP создают для тестирования гипотез и проверки жизнеспособности задуманного продукта, насколько он будет ценным и востребованным на рынке.

Результаты тестирования минимально жизнеспособного продукта и обратная связь от целевой аудитории помогают понять, стоит ли развивать проект дальше, какие изменения следует внести в стратегию, а что оставить в первоначальном виде.

Полезность разработки MVP доказывают примеры крупных на данный момент компаний. Например, Даниэль Эк и Мартин Лорентсон в 2006 году запустили небольшой сервис с одной функцией — потоковая передача музыки. Сегодня их продукт — Spotify — оценивается в $21 миллиард, сотрудничает с крупными звукозаписывающими студиями и имеет 50 миллионов человек активной аудитории.

В 2008 году, когда аренда отеля или жилья во время путешествия была большой проблемой, два энтузиаста решили подойти к вопросу нестандартно и сдали свою квартиру по простому факсу. По сути, это тоже MVP, в котором тестировалась основная функция. Эксперимент показал, что продукт получит спрос, а сегодня Airbnb — одна из крупнейших площадок по поиску краткосрочной аренды жилья.

![](./misc/images/mvp.jpg)


## Chapter II

Итогом выполненной работы должен быть спроектированный и доведенный до состояния MVP проект. В качестве тематики разрабатываемого проекта берется тема отличная от той, что использовалась в заданиях 1-4. Mock-требования от заказчика находятся в материалах.

### Part 1. Проектирование

В первой части требуется спроектировать систему по выбранной тематике, используя знания, полученные в темах 1-4. Необходимо:
* составить SRD;
* выделить и сформулировать требования на основе атрибутов качества (тема 2);
* формализовать пользовательские сценарии, бизнес-процессы, сущности предметной области;
* написать SDD.

**Важно!** При проектировании системы необходимо использовать подход чистой архитектуры и методологию **DDD**.

### Part 2. Разработка проекта

В данной части необходимо разработать **MVP** проекта по выбранной тематике.

Необходимо:
* выделить основные функции, которые будут включены в MVP;
* определить требования к MVP;
* проработать архитектуру проекта в зависимости от выбранной тематики;
* создать "заглушки" для взаимодействия с внешними сервисами (например, используя mockapi.io);
* реализовать выбранные для MVP юзкейсы на выбранном стеке технологий;

В рамках MVP должно быть реализовано 6 функций:
* для тематики "Агрегатор билетов":
    * регистрация и аутентификация пользователей (путешественников и администраторов);
    * интеграция с API авиакомпаний и других посредников для получения информации о рейсах, местах и ценах;
    * поиск и фильтрация авиабилетов по различным критериям (дата, время, пункт назначения, кол-во пересадок, цена и т.д.);
* для тематики "Маркетплейс":
    * регистрация и аутентификация пользователей (покупателей и продавцов);
    * поиск товаров с фильтрами и сортировкой по разным критериям;
    * управление личным профилем для продавцов (товары, заказы, отзывы);
* для тематики "Сервис доставки":
    * регистрация и аутентификация пользователей (покупателей, продавцов, и курьеров);
    * каталог товаров и ресторанов с возможностью поиска, фильтрации, и сортировки;
    * рейтинги и отзывы о продавцах, ресторанах и курьерах;
* для тематики "Онлайн-кинотеатр":
    * регистрация и аутентификация пользователей (покупателей и администраторов);
    * каталог фильмов и сериалов с подробной информацией (описание, рейтинг, трейлеры, актерский состав);
    * поиск, фильтрация и сортировка контента по разным критериям (жанр, год выпуска, рейтинг и т.д.);
* для тематики "Сервис аренды жилья":
    * регистрация и аутентификация пользователей (арендаторов, арендодателей и администраторов);
    * создание и редактирование объявлений о сдаче жилья с подробной информацией (описание, фотографии, цена, условия аренды);
    * поиск и фильтрация предложений по различным критериям (тип жилья, местоположение, количество спален, цена и т.д.).

Помимо перечисленных выше необходимо выбрать в рамках тематики 3 дополнительные функции.
